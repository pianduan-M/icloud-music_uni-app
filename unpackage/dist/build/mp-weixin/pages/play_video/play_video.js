(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/play_video/play_video"],{"1a79":function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=u(r("a34a")),n=u(r("88ac")),a=r("f210"),o=r("2f62");function u(t){return t&&t.__esModule?t:{default:t}}function c(t){return f(t)||l(t)||s(t)||d()}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t,e){if(t){if("string"===typeof t)return v(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(t,e):void 0}}function l(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function f(t){if(Array.isArray(t))return v(t)}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function h(t,e,r,i,n,a,o){try{var u=t[a](o),c=u.value}catch(d){return void r(d)}u.done?e(c):Promise.resolve(c).then(i,n)}function p(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var a=t.apply(e,r);function o(t){h(a,i,n,o,u,"next",t)}function u(t){h(a,i,n,o,u,"throw",t)}o(void 0)}))}}function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function g(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),!0).forEach((function(e){m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function m(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var w=function(){r.e("components/NavBar/nav-bar").then(function(){return resolve(r("1fa2"))}.bind(null,r)).catch(r.oe)},y={onLoad:function(t){if(t.id){this.offset++;var e=t.id;e.length<10?(this.vid=e,this.getMvDetail(e)):(this.vid=e,this.getVideoDetail(e))}else this.getVideo(),this.switchPauseSong()},data:function(){return{video:[],first:{},second:{},thrid:{},currentIndex:0,vid:"",offset:-1,isShowControls:!0,current:0}},methods:g(g({},(0,o.mapActions)(["switchPauseSong"])),{},{touchStart:function(t){if(!(this.video.length<=1)){if(0===t){var e=this.video[this.currentIndex+1].data;if(this.second={url:e.urlInfo.url,vid:e.vid,coverUrl:e.coverUrl,isVertical:e.height>e.width},this.currentIndex>0){var r=this.video[this.currentIndex-1].data;this.thrid={url:r.urlInfo.url,vid:r.vid,coverUrl:r.coverUrl,isVertical:r.height>r.width}}}if(1===t){var i=this.video[this.currentIndex-1].data;this.first={url:i.urlInfo.url,vid:i.vid,coverUrl:i.coverUrl,isVertical:i.height>i.width};var n=this.video[this.currentIndex+1].data;this.thrid={url:n.urlInfo.url,vid:n.vid,coverUrl:n.coverUrl,isVertical:n.height>n.width}}if(2===t){var a=this.video[this.currentIndex+1].data;this.first={url:a.urlInfo.url,vid:a.vid,coverUrl:a.coverUrl,isVertical:a.height>a.width};var o=this.video[this.currentIndex-1].data;this.second={url:o.urlInfo.url,vid:o.vid,coverUrl:o.coverUrl,isVertical:o.height>o.width}}}},swiperChange:function(t){var e=t.detail.current;2!==this.current?e>this.current?this.currentIndex++:this.currentIndex--:0===e?this.currentIndex++:this.currentIndex--,this.current=e,this.isShowControls=!0,this.vid=this.video[this.currentIndex].data.vid,this.currentIndex>=this.video.length-1&&this.getVideo()},getVideo:function(){var t=this;return p(i.default.mark((function e(){var r,o,u,d;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.offset++,e.next=3,(0,n.default)({url:"/video/timeline/recommend",data:{offset:t.offset}});case 3:if(o=e.sent,200===o.data.code){e.next=7;break}return(0,a.showToast)({title:"错误请重试"}),e.abrupt("return");case 7:u=o.data.datas,(r=t.video).push.apply(r,c(u)),t.vid||(d=u[0].data,t.first={url:d.urlInfo.url,vid:d.vid,coverUrl:d.coverUrl},t.vid=d.vid);case 10:case"end":return e.stop()}}),e)})))()},getVideoDetail:function(t){var e=this;return p(i.default.mark((function r(){var o,u,c,d;return i.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,(0,n.default)({url:"/video/detail",data:{id:t}});case 2:if(o=r.sent,200===o.data.code){r.next=6;break}return(0,a.showToast)({title:"错误请重试"}),r.abrupt("return");case 6:return r.next=8,(0,n.default)({url:"/video/url",data:{id:t}});case 8:u=r.sent,c=u.data.urls[0].url,d=o.data.data,e.vid=d.vid,e.first={url:c,vid:t,coverUrl:d.cover,isVertical:d.height>d.width},o.data.data.urlInfo={url:c},o.data.data.vid=t,o.data.data.coverUrl=d.cover,e.video.push(o.data),e.getVideo();case 18:case"end":return r.stop()}}),r)})))()},getMvDetail:function(t){var e=this;return p(i.default.mark((function r(){var o,u,c,d;return i.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log("mv"),r.next=3,(0,n.default)({url:"/mv/detail",data:{mvid:t}});case 3:if(o=r.sent,200===o.data.code){r.next=7;break}return(0,a.showToast)({title:"错误请重试"}),r.abrupt("return");case 7:return r.next=9,(0,n.default)({url:"/mv/url",data:{id:t}});case 9:u=r.sent,c=u.data.data.url,d=o.data.data,e.first={url:c,vid:t,coverUrl:d.cover,isVertical:d.height>d.width},o.data.data.urlInfo={url:c},o.data.data.vid=t,o.data.data.coverUrl=d.cover,e.video.push(o.data),e.getVideo();case 18:case"end":return r.stop()}}),r)})))()},touchVideo:function(){var t=this;this.isShowControls=!0,this.controlsTimeoutId&&clearTimeout(this.controlsTimeoutId),this.controlsTimeoutId=setTimeout((function(){t.isShowControls=!1}),1e3)},videoWaiting:function(){this.isShowControls=!0},videoPlay:function(){this.isPlay&&this.switchPauseSong(),this.isShowControls=!1},goback:function(){t.navigateBack({delta:1})}}),components:{NavBar:w},computed:g({},(0,o.mapState)(["isPlay"]))};e.default=y}).call(this,r("543d")["default"])},"7a73":function(t,e,r){"use strict";r.r(e);var i=r("d669"),n=r("8e3b");for(var a in n)"default"!==a&&function(t){r.d(e,t,(function(){return n[t]}))}(a);r("b582");var o,u=r("f0c5"),c=Object(u["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);e["default"]=c.exports},"8e3b":function(t,e,r){"use strict";r.r(e);var i=r("1a79"),n=r.n(i);for(var a in i)"default"!==a&&function(t){r.d(e,t,(function(){return i[t]}))}(a);e["default"]=n.a},"95c1":function(t,e,r){"use strict";(function(t){r("7636");i(r("66fd"));var e=i(r("7a73"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,r("543d")["createPage"])},b582:function(t,e,r){"use strict";var i=r("c594"),n=r.n(i);n.a},c594:function(t,e,r){},d669:function(t,e,r){"use strict";var i;r.d(e,"b",(function(){return n})),r.d(e,"c",(function(){return a})),r.d(e,"a",(function(){return i}));var n=function(){var t=this,e=t.$createElement;t._self._c},a=[]}},[["95c1","common/runtime","common/vendor"]]]);