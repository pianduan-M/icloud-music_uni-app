(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/user"],{"02fb":function(t,e,n){"use strict";n.r(e);var i=n("6940"),r=n("3942");for(var l in r)"default"!==l&&function(t){n.d(e,t,(function(){return r[t]}))}(l);n("690b");var o,s=n("f0c5"),c=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);e["default"]=c.exports},2107:function(t,e,n){},"339f":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n("a34a")),r=o(n("88ac")),l=n("2f62");function o(t){return t&&t.__esModule?t:{default:t}}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e,n,i,r,l,o){try{var s=t[l](o),c=s.value}catch(a){return void n(a)}s.done?e(c):Promise.resolve(c).then(i,r)}function f(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var l=t.apply(e,n);function o(t){u(l,i,r,o,s,"next",t)}function s(t){u(l,i,r,o,s,"throw",t)}o(void 0)}))}}var p=function(){n.e("pages/user/children/user-info").then(function(){return resolve(n("d169"))}.bind(null,n)).catch(n.oe)},d=function(){n.e("pages/user/children/like-music").then(function(){return resolve(n("dc66"))}.bind(null,n)).catch(n.oe)},h=function(){n.e("pages/user/children/user-playlist").then(function(){return resolve(n("60c3"))}.bind(null,n)).catch(n.oe)},y=function(){n.e("pages/user/children/playlist-tab").then(function(){return resolve(n("9961"))}.bind(null,n)).catch(n.oe)},b=function(){n.e("components/MusicBar/music-Bar").then(function(){return resolve(n("f7b7"))}.bind(null,n)).catch(n.oe)},v=(getApp(),{data:function(){return{playlist:{created:[],collect:[],like:{}},isFixed:!1,playlistTabTop:"",playlistCreatedTop:"",playlistCollectTop:"",playlistType:"created",scrollTop:0,isClick:!1,intoView:"0"}},components:{UserInfo:p,LikeMusic:d,UserPlaylist:h,PlaylistTab:y,MusicBar:b},onLoad:function(){t.getSystemInfo({success:function(t){console.log(t)}})},onShow:function(){this.userInfo.userId&&!this.playlist.like.nickname&&this.getPlaylist()},mounted:function(){var t=this;this.$refs.userPlaylistRef.getPlaylistTop().then((function(e){t.playlistCreatedTop=e[0].top,t.playlistCollectTop=e[1].top}))},methods:{getPlaylist:function(){var e=this;return f(i.default.mark((function n(){var l,o,s,c;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(l=t.getStorageSync("userPlaylist")||{},!l.date){n.next=6;break}if(o=Date.now(),!(o-l.date<=36e5)){n.next=6;break}return e.playlist=l,n.abrupt("return");case 6:return n.next=8,(0,r.default)({url:"/user/playlist",data:{uid:e.userInfo.userId}});case 8:s=n.sent,c={created:[],collect:[],like:{}},s.data.playlist.forEach((function(t){"我喜欢的音乐"==t.name?c.like=t:t.userId===e.userInfo.userId?c.created.push(t):c.collect.push(t)})),e.playlist=c,c.date=Date.now(),t.setStorageSync("userPlaylist",c);case 14:case"end":return n.stop()}}),n)})))()},choosePlaylist:function(t){var e=this;this.playlistType="created_btn"===t?"created":"collect",this.$refs.userPlaylistRef.getPlaylistTop().then((function(t){e.playlistCreatedTop=t[0].top,e.playlistCollectTop=t[1].top})),this.intoView="created_btn"===t?this.playlistCreatedTop-num:this.playlistCollectTop-num,this.isClick=!0,setTimeout((function(){e.isClick=!1}),500)},handleScroll:function(t){var e=t.detail.scrollTop;this.setPlaylistTop(e),this.scrollTop=e},setPlaylistTop:function(t){var e=this,n=this.playlistTabTop,i=this.isFixed,r=this.playlistType,l=this.playlistCollectTop,o=this.playlistCreatedTop,s=this.isClick;if(l<400&&this.$refs.userPlaylistRef.getPlaylistTop().then((function(t){e.playlistCreatedTop=t[0].top,e.playlistCollectTop=t[1].top})),n&&t>=n&&!i&&(this.isFixed=!0),n&&t<=n&&i&&(this.isFixed=!1),l&&t>=l&&"created"===r){if(s)return;this.playlistType="collect"}if(o&&t<l&&"collect"===r){if(s)return;this.playlistType="created"}}},computed:c(c({},(0,l.mapGetters)(["currentSong"])),(0,l.mapState)(["userInfo"])),watch:{userInfo:function(){this.userInfo.userId||(this.playlist={created:[],collect:[],like:{}})}}});e.default=v}).call(this,n("543d")["default"])},3942:function(t,e,n){"use strict";n.r(e);var i=n("339f"),r=n.n(i);for(var l in i)"default"!==l&&function(t){n.d(e,t,(function(){return i[t]}))}(l);e["default"]=r.a},"690b":function(t,e,n){"use strict";var i=n("2107"),r=n.n(i);r.a},6940:function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return i}));var r=function(){var t=this,e=t.$createElement;t._self._c},l=[]},dcb4:function(t,e,n){"use strict";(function(t){n("7636");i(n("66fd"));var e=i(n("02fb"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])}},[["dcb4","common/runtime","common/vendor"]]]);