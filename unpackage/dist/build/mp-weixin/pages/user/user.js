(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/user"],{"02fb":function(t,e,n){"use strict";n.r(e);var i=n("0813"),r=n("3942");for(var l in r)"default"!==l&&function(t){n.d(e,t,(function(){return r[t]}))}(l);n("690b");var c,a=n("f0c5"),o=Object(a["a"])(r["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],c);e["default"]=o.exports},"0813":function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return i}));var r=function(){var t=this,e=t.$createElement;t._self._c},l=[]},2107:function(t,e,n){},"339f":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=c(n("a34a")),r=c(n("88ac")),l=n("2f62");function c(t){return t&&t.__esModule?t:{default:t}}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e,n,i,r,l,c){try{var a=t[l](c),o=a.value}catch(s){return void n(s)}a.done?e(o):Promise.resolve(o).then(i,r)}function f(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var l=t.apply(e,n);function c(t){u(l,i,r,c,a,"next",t)}function a(t){u(l,i,r,c,a,"throw",t)}c(void 0)}))}}var p=function(){n.e("pages/user/children/user-info").then(function(){return resolve(n("d169"))}.bind(null,n)).catch(n.oe)},d=function(){n.e("pages/user/children/like-music").then(function(){return resolve(n("dc66"))}.bind(null,n)).catch(n.oe)},h=function(){n.e("pages/user/children/playlist-tab").then(function(){return resolve(n("9961"))}.bind(null,n)).catch(n.oe)},y=function(){n.e("components/MusicBar/music-Bar").then(function(){return resolve(n("f7b7"))}.bind(null,n)).catch(n.oe)},b=(getApp(),{data:function(){return{playlist:{created:[],collect:[],like:{}},isFixed:!1,playlistTabTop:"",playlistCreatedTop:"",playlistCollectTop:"",playlistType:"created",scrollTop:0,isClick:!1,intoView:"0"}},components:{UserInfo:p,LikeMusic:d,PlaylistTab:h,MusicBar:y},onShow:function(){this.userInfo.userId&&!this.playlist.like.nickname&&this.getPlaylist()},mounted:function(){this.getPlaylistTop()},methods:{getPlaylist:function(){var e=this;return f(i.default.mark((function n(){var l,c,a,o;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.showLoading({title:"加载中"}),l=t.getStorageSync("userPlaylist")||{},!l.date){n.next=7;break}if(c=Date.now(),!(c-l.date<=36e5)){n.next=7;break}return e.playlist=l,n.abrupt("return");case 7:return n.next=9,(0,r.default)({url:"/user/playlist",data:{uid:e.userInfo.userId}});case 9:a=n.sent,t.hideLoading(),o={created:[],collect:[],like:{}},a.data.playlist.forEach((function(t){"我喜欢的音乐"==t.name?o.like=t:t.userId===e.userInfo.userId?o.created.push(t):o.collect.push(t)})),e.playlist=o,o.date=Date.now(),t.setStorageSync("userPlaylist",o);case 16:case"end":return n.stop()}}),n)})))()},choosePlaylist:function(t){var e=this;this.playlistType="created_btn"===t?"created":"collect",this.intoView="created_btn"===t?"playlist_created":"playlist_collect",this.isClick=!0,setTimeout((function(){e.isClick=!1}),500)},handleScroll:function(t){var e=t.detail.scrollTop;this.setPlaylistTop(e),this.scrollTop=e},setPlaylistTop:function(t){var e=this.playlistTabTop,n=this.isFixed,i=this.playlistType,r=this.playlistCollectTop,l=this.playlistCreatedTop,c=this.isClick;if(t<200&&(this.intoView=""),e&&t>=e&&!n&&(this.isFixed=!0),e&&t<=e&&n&&(this.isFixed=!1),r&&t>=r&&"created"===i){if(c)return;this.playlistType="collect"}if(l&&t<r&&"collect"===i){if(c)return;this.playlistType="created"}},toPlaylistDetail:function(e){t.navigateTo({url:"/pages/playlist_detail/playlist_detail?id="+e})},getPlaylistTop:function(){var e=this;this.$nextTick((function(){setTimeout((function(){var n=t.createSelectorQuery().in(e);n.select("#playlist_created").boundingClientRect(),n.select("#playlist_collect").boundingClientRect();var i=e;n.exec((function(t){i.playlistCreatedTop=t[0].top,i.playlistCollectTop=t[1].top}))}),300)}))}},computed:o(o({},(0,l.mapGetters)(["currentSong"])),(0,l.mapState)(["userInfo"])),watch:{userInfo:function(){this.userInfo.userId||(this.playlist={created:[],collect:[],like:{}})}}});e.default=b}).call(this,n("543d")["default"])},3942:function(t,e,n){"use strict";n.r(e);var i=n("339f"),r=n.n(i);for(var l in i)"default"!==l&&function(t){n.d(e,t,(function(){return i[t]}))}(l);e["default"]=r.a},"690b":function(t,e,n){"use strict";var i=n("2107"),r=n.n(i);r.a},dcb4:function(t,e,n){"use strict";(function(t){n("7636");i(n("66fd"));var e=i(n("02fb"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])}},[["dcb4","common/runtime","common/vendor"]]]);