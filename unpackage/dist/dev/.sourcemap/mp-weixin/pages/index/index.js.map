{"version":3,"sources":["uni-app:///main.js","webpack:///D:/code/uni-app/iCloudMusic/iCloudMusic/pages/index/index.vue?dc07","webpack:///D:/code/uni-app/iCloudMusic/iCloudMusic/pages/index/index.vue?0e22","webpack:///D:/code/uni-app/iCloudMusic/iCloudMusic/pages/index/index.vue?f2fa","webpack:///D:/code/uni-app/iCloudMusic/iCloudMusic/pages/index/index.vue?86e5","uni-app:///pages/index/index.vue","webpack:///D:/code/uni-app/iCloudMusic/iCloudMusic/pages/index/index.vue?0a7b","webpack:///D:/code/uni-app/iCloudMusic/iCloudMusic/pages/index/index.vue?b084"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,4F;AACAA,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACc;;;AAGlE;AACyK;AACzK,gBAAgB,6KAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAgoB,CAAgB,+mBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC6BppB;;;;AAIA;;AAEA,iE;;;;;AAKA;AACA,uB;;AAEA;AACA,MADA,kBACA;AACA;AACA;AACA,oBAFA;AAGA;AACA,kBAJA;AAKA,uBALA;AAMA,cANA;AAOA,iBAPA;AAQA;AACA,wBATA;;AAWA,GAbA;AAcA;AACA,kBADA;AAEA,sBAFA;AAGA,wCAHA;AAIA,kBAJA;AAKA,oBALA;AAMA,sBANA,EAdA;;AAsBA,QAtBA,oBAsBA;AACA;;AAEA,GAzBA;AA0BA;AACA;AACA,WAFA,qBAEA;AACA;AACA;AACA,oBADA;;AAGA;AACA;AACA,sBADA;;AAGA;AACA,oCADA;;AAGA;AACA,oCADA;;AAGA;AACA,uBADA;;;AAIA;AACA,UADA,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAFA;AAGA,OAbA;;AAeA,KApCA;AAqCA;AACA,cAtCA,sBAsCA,GAtCA,EAsCA;AACA;AACA;AACA;AACA,KA1CA;AA2CA;AACA,eA5CA,uBA4CA,GA5CA,EA4CA;AACA;AACA;AACA,KA/CA;AAgDA;AACA,gBAjDA,wBAiDA,GAjDA,EAiDA;AACA;AACA;AACA;AACA;AACA,OAFA;AAGA;AACA,KAxDA;;AA0DA;AACA,cA3DA,sBA2DA,GA3DA,EA2DA;AACA;AACA;AACA,sBAHA,GAGA,yBAHA;AAIA,sBAJA,GAIA;AACA;AACA;AACA,iBAHA,EAGA,EAHA,CAJA;AAQA;AACA,wBATA,GASA,EATA;AAUA;AACA;AACA,2CADA;AAEA;AACA,8BADA,EAFA;;;AAMA,iBAPA,EAVA;AAkBA,uCAlBA,SAkBA,OAlBA;AAmBA;AACA;AACA;AACA,8BADA;AAEA,kCAFA;AAGA,kDAHA;;AAKA,iBAPA;AAQA,yCA3BA;AA4BA,KAvFA;AAwFA;AACA,UAzFA,kBAyFA,CAzFA,EAyFA;AACA;AADA;;;AAKA,6BALA,CAGA,EAHA,yBAGA,EAHA,CAIA,QAJA,yBAIA,QAJA;;AAOA,aAPA;AAQA,eARA,CAOA,OAPA;AASA;AACA;AACA;AACA;;AAEA;AACA;AACA,+CADA;;;AAIA,KA5GA;;;AA+GA;AACA,uBAhHA,iCAgHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAFA,EAEA,GAFA;AAGA,KAxHA,EA1BA;;;AAqJA;AACA,wCADA,CArJA,E;;;;;;;;;;;;;AC3CA;AAAA;AAAA;AAAA;AAAmqC,CAAgB,+jCAAG,EAAC,C;;;;;;;;;;;ACAvrC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=57280228&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=57280228&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"home\">\r\n\t\t<Search />\r\n\t\t<!-- 内容区 -->\r\n\t\t<scroll-view class=\"home_content\" refresher-enabled scroll-y @refresherrefresh=\"handleResherrefresh\"\r\n\t\t\t:refresher-triggered=\"isTriggered\">\r\n\t\t\t<view class=\"home_content_wrap\">\r\n\t\t\t\t<Banner :bannerList=\"bannerList\" />\r\n\t\t\t\t<BallList :ballList=\"ballList\" />\r\n\t\t\t\t<RecommendPlaylist :recommendList=\"recommendList\" />\r\n\t\t\t\t<TopList :topList=\"topList\" />\r\n\t\t\t</view>\r\n\t\t\t<!-- 音乐控件占位 -->\r\n\t\t\t<view class=\"music_bar_seat\" style=\"height:80rpx\" :style=\"{display: currentSong?'':'none'}\"></view>\r\n\t\t</scroll-view>\r\n\t\t<!-- 音乐控件 -->\r\n\t\t<MusicBar />\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\t// 引入子组件\r\n\timport Banner from './children/Banner.vue'\r\n\timport BallList from './children/BallList.vue'\r\n\timport RecommendPlaylist from './children/RecommendPlaylist.vue'\r\n\timport Search from './children/Search.vue'\r\n\timport TopList from './children/TopList.vue'\r\n\timport MusicBar from '@/components/MusicBar/music-Bar.vue'\r\n\t\r\n\timport {\r\n\t\tmapGetters\r\n\t} from 'vuex'\r\n\r\n\timport request from '../../request/index'\r\n\t// 格式化数字\r\n\timport {\r\n\t\tmakeFriendly,\r\n\t\tshowToast\r\n\t} from '../../utils/utils.js'\r\n\r\n\t// 获取应用实例\r\n\tvar appInst = getApp();\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t// banner 数据\r\n\t\t\t\tbannerList: [],\r\n\t\t\t\t// ball 列表\r\n\t\t\t\tballList: [],\r\n\t\t\t\trecommendList: [],\r\n\t\t\t\tlist: [],\r\n\t\t\t\ttopList: [],\r\n\t\t\t\t// 控制下拉刷新\r\n\t\t\t\tisTriggered: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tBanner,\r\n\t\t\tBallList,\r\n\t\t\tRecommendPlaylist,\r\n\t\t\tSearch,\r\n\t\t\tTopList,\r\n\t\t\tMusicBar,\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tthis.getData()\r\n\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 发送请求函数\r\n\t\t\tgetData() {\r\n\t\t\t\t// 先设置加载状态\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载中',\r\n\t\t\t\t});\r\n\t\t\t\t// 统一发请求\r\n\t\t\t\tconst bannersRes = request({\r\n\t\t\t\t\turl: '/banner'\r\n\t\t\t\t})\r\n\t\t\t\tconst ballListRes = request({\r\n\t\t\t\t\turl: '/homepage/dragon/ball'\r\n\t\t\t\t})\r\n\t\t\t\tconst recommendRes = request({\r\n\t\t\t\t\turl: '/personalized?limit=6'\r\n\t\t\t\t})\r\n\t\t\t\tconst topListRes = request({\r\n\t\t\t\t\turl: '/toplist'\r\n\t\t\t\t})\r\n\r\n\t\t\t\tPromise.all([bannersRes, ballListRes, recommendRes, topListRes])\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tthis.getBanners(res[0])\r\n\t\t\t\t\t\tthis.getBallList(res[1])\r\n\t\t\t\t\t\tthis.getRecommend(res[2])\r\n\t\t\t\t\t\t// this.getHomePage()\r\n\t\t\t\t\t\tthis.getTopList(res[3])\r\n\t\t\t\t\t\t// 加载完成在隐藏loading\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t// 关闭下拉刷新\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.isTriggered = false\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\r\n\t\t\t},\r\n\t\t\t// 获取banner 数据\r\n\t\t\tgetBanners(res) {\r\n\t\t\t\t// const res = await request({ url: '/banner' })\r\n\t\t\t\tconst bannerList = res.data.banners\r\n\t\t\t\tthis.bannerList = bannerList\r\n\t\t\t},\r\n\t\t\t// 获取首页导航列表数据 \r\n\t\t\tgetBallList(res) {\r\n\t\t\t\t// const res = await request({ url: '/homepage/dragon/ball' })\r\n\t\t\t\tthis.ballList = res.data.data\r\n\t\t\t},\r\n\t\t\t// 推荐歌单 数据\r\n\t\t\tgetRecommend(res) {\r\n\t\t\t\t// const res = await request({ url: '/personalized?limit=6' })\r\n\t\t\t\tconst recommendList = res.data.result\r\n\t\t\t\trecommendList.forEach(item => {\r\n\t\t\t\t\titem.playCount = makeFriendly(item.playCount)\r\n\t\t\t\t});\r\n\t\t\t\tthis.recommendList = recommendList\r\n\t\t\t},\r\n\r\n\t\t\t// 排行榜\r\n\t\t\tasync getTopList(res) {\r\n\t\t\t\t// const res = await request({ url: '/toplist' })\r\n\t\t\t\t// 先得到榜单ID 再根据请求榜单详情\r\n\t\t\t\tconst topArr = res.data.list.slice(0, 5)\r\n\t\t\t\tconst topIds = topArr.reduce((ids, v) => {\r\n\t\t\t\t\tids.push(v.id)\r\n\t\t\t\t\treturn ids\r\n\t\t\t\t}, [])\r\n\t\t\t\t// 请求榜单详情 得到歌曲列表\r\n\t\t\t\tconst promises = []\r\n\t\t\t\ttopIds.forEach(item => {\r\n\t\t\t\t\tpromises.push(request({\r\n\t\t\t\t\t\turl: '/playlist/detail',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tid: item\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}))\r\n\t\t\t\t})\r\n\t\t\t\tlet topList = await Promise.all(promises)\r\n\t\t\t\ttopList = topList.map(item => {\r\n\t\t\t\t\tconst top = item.data.playlist\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tid: top.id,\r\n\t\t\t\t\t\tname: top.name,\r\n\t\t\t\t\t\ttracks: top.tracks.slice(0, 3)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tthis.topList = topList\r\n\t\t\t},\r\n\t\t\t// 添加到播放列表\r\n\t\t\ttoPlay(e) {\r\n\t\t\t\t// 获取当前歌曲id\r\n\t\t\t\tconst {\r\n\t\t\t\t\tid,\r\n\t\t\t\t\tparentid\r\n\t\t\t\t} = e.currentTarget.dataset\r\n\t\t\t\tconst {\r\n\t\t\t\t\ttopList\r\n\t\t\t\t} = this.data\r\n\t\t\t\tconst index = topList.findIndex(item => item.id === parentid)\r\n\t\t\t\t// 存储当前歌单到缓存\r\n\t\t\t\tuni.setStorageSync('playlist', topList[index].tracks);\r\n\t\t\t\tappInst.globalData.playlist = topList[index].tracks\r\n\r\n\t\t\t\t// 跳转到播放页面\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/play_music/index?id=' + id\r\n\t\t\t\t});\r\n\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// 下拉刷新\r\n\t\t\thandleResherrefresh() {\r\n\t\t\t\tif (this.flag) return\r\n\t\t\t\tthis.isTriggered = true\r\n\t\t\t\tthis.flag = true\r\n\t\t\t\tthis.getData()\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.flag = false\r\n\t\t\t\t}, 300)\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapGetters(['currentSong'])\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n\t.home {\r\n\t\tposition: absolute;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground-color: #f6f6f6;\r\n\t\toverflow: hidden;\r\n\r\n\t\t// 容器\r\n\t\t.home_content {\r\n\t\t\tposition: relative;\r\n\t\t\twidth: 100%;\r\n\t\t\theight: calc(100% - 50px);\r\n\t\t\toverflow: hidden;\r\n\t\t\tpadding-top: 70px;\r\n\r\n\t\t}\r\n\r\n\t\t// 首页列表\r\n\t\t.ball_list_wrap {\r\n\t\t\tbackground-color: #fff;\r\n\t\t}\r\n\t}\r\n</style>\n","import mod from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=less&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1621774335131\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}